#!/bin/sh

# banner
echo -e "\e[31m

███████╗ ██████╗ ██╗   ██╗████████╗██╗  ██╗████████╗███████╗██╗     ███████╗ ██████╗ ██████╗ ███╗   ███╗
██╔════╝██╔═══██╗██║   ██║╚══██╔══╝██║  ██║╚══██╔══╝██╔════╝██║     ██╔════╝██╔════╝██╔═══██╗████╗ ████║
███████╗██║   ██║██║   ██║   ██║   ███████║   ██║   █████╗  ██║     █████╗  ██║     ██║   ██║██╔████╔██║
╚════██║██║   ██║██║   ██║   ██║   ██╔══██║   ██║   ██╔══╝  ██║     ██╔══╝  ██║     ██║   ██║██║╚██╔╝██║
███████║╚██████╔╝╚██████╔╝   ██║   ██║  ██║   ██║   ███████╗███████╗███████╗╚██████╗╚██████╔╝██║ ╚═╝ ██║
╚══════╝ ╚═════╝  ╚═════╝    ╚═╝   ╚═╝  ╚═╝   ╚═╝   ╚══════╝╚══════╝╚══════╝ ╚═════╝ ╚═════╝ ╚═╝     ╚═╝
                                                                                                        \e[0m"


file="commands.txt"
totalCmds=`wc -l $file | sed 's/[^0-9]//g'`
echo -e "I am starting................................" >/dev/stderr
echo -e "$totalCmds commands found................................\n" >/dev/stderr

# main
while read line; do
    err=$(eval "$line 2>&1") &&
        (echo -e "[\e[102m\e[30m  OK  \e[39m\e[49m]\t\c" && echo -e "$line\n") ||
        (echo -e "[\e[41m\e[97m  FAIL  \e[39m\e[49m]\t\c" && echo -e "$line" && echo -e "\t\t$err\n")
done < $file
